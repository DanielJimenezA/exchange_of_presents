<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Participante</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="static/styles.css" rel="stylesheet">
</head>

<body class="container mt-4">

<h2 class="titulo-navidad text-center">ğŸ Captura tus regalos ğŸ„</h2>

<div class="card shadow p-4">
  <input id="nombre" class="form-control mb-2" placeholder="Tu nombre">
  <input id="whatsapp" class="form-control mb-2" placeholder="WhatsApp 521XXXXXXXXXX">
  <input id="r1" class="form-control mb-2" placeholder="Regalo 1">
  <input id="r2" class="form-control mb-2" placeholder="Regalo 2">
  <input id="r3" class="form-control mb-3" placeholder="Regalo 3">

  <button class="btn btn-navidad w-100" onclick="enviar()">Enviar</button>
</div>

<script src="static/config.js"></script>
<script>
const intercambioId = new URLSearchParams(location.search).get("id");

function api(p){ return BACKEND_BASE_URL + p }

function enviar(){
  fetch(api("/api/participante"),{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      intercambio_id: intercambioId,
      nombre: nombre.value,
      whatsapp: whatsapp.value,
      regalos: [r1.value, r2.value, r3.value]
    })
  })
  .then(r => r.ok ? alert("ğŸ Registrado") : alert("âŒ Intercambio invÃ¡lido"));
}
</script>

</body>
</html>
